webpackJsonp([1],[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t,r){return(0,l["default"])('\n      <li>\n        <span class="fa fa-times delete"></span>\n        <span>'+(0,f.capitalize)(e)+": "+(0,f.capitalize)(t)+" - "+(0,f.capitalize)(r)+"</span>\n      </li>").data("type",e).data("area",t).data("name",r)}function i(){(0,l["default"])(".control .markers").find("#marker-city").prop("checked",!0),(0,l["default"])(".control .markers").find(".name").val(""),(0,l["default"])(".select .markers").removeClass("active"),(0,l["default"])(".control .markers").removeClass("active"),(0,l["default"])(".control").removeClass("active"),(0,l["default"])(".control .heatmaps").find("#heatmap-city").prop("checked",!0),(0,l["default"])(".control .heatmaps").find(".name").val(""),(0,l["default"])(".control .heatmaps").find(".variable").val(""),(0,l["default"])(".select .heatmaps").removeClass("active"),(0,l["default"])(".control .heatmaps").removeClass("active"),(0,l["default"])(".control").removeClass("active"),(0,l["default"])(".control .geometry").find("#geometry-city").prop("checked",!0),(0,l["default"])(".control .geometry").find(".name").val(""),(0,l["default"])(".control .geometry").find(".gran").val(""),(0,l["default"])(".select .geometry").removeClass("active"),(0,l["default"])(".control .geometry").removeClass("active"),(0,l["default"])(".control").removeClass("active")}var u=r(2),l=n(u),c=r(3),f=r(1),s=r(4),d=n(s);(0,l["default"])(document).foundation(),d["default"].init("map");var p=(0,c.getToken)(),v=[],m=[],h=[];(0,l["default"])(".select").on("click",".markers",function(e){e.preventDefault(),(0,l["default"])(e.currentTarget).addClass("active").siblings().removeClass("active"),(0,l["default"])(".control .markers").addClass("active").siblings().removeClass("active"),(0,l["default"])(".control").addClass("active")}).on("click",".markers.active",function(e){e.preventDefault(),(0,l["default"])(e.currentTarget).removeClass("active").siblings().removeClass("active"),(0,l["default"])(".control .markers").removeClass("active").siblings().removeClass("active"),(0,l["default"])(".control").removeClass("active")}).on("click",".heatmaps",function(e){e.preventDefault(),(0,l["default"])(e.currentTarget).addClass("active").siblings().removeClass("active"),(0,l["default"])(".control .heatmaps").addClass("active").siblings().removeClass("active"),(0,l["default"])(".control").addClass("active")}).on("click",".heatmaps.active",function(e){e.preventDefault(),(0,l["default"])(e.currentTarget).removeClass("active").siblings().removeClass("active"),(0,l["default"])(".control .heatmaps").removeClass("active").siblings().removeClass("active"),(0,l["default"])(".control").removeClass("active")}).on("click",".geometry",function(e){e.preventDefault(),(0,l["default"])(e.currentTarget).addClass("active").siblings().removeClass("active"),(0,l["default"])(".control .geometry").addClass("active").siblings().removeClass("active"),(0,l["default"])(".control").addClass("active")}).on("click",".geometry.active",function(e){e.preventDefault(),(0,l["default"])(e.currentTarget).removeClass("active").siblings().removeClass("active"),(0,l["default"])(".control .geometry").removeClass("active").siblings().removeClass("active"),(0,l["default"])(".control").removeClass("active")}),(0,l["default"])(".controls .layers").on("click",".delete",function(e){e.preventDefault();var t=(0,l["default"])(e.currentTarget).parent().data("type"),r=(0,l["default"])(e.currentTarget).parent().data("area"),n=(0,l["default"])(e.currentTarget).parent().data("name");switch(t){case"markers":var a=function(){(0,l["default"])(e.currentTarget).parent().remove();var r=(0,l["default"])(".controls .layers").find("li").toArray().map(function(e){return{type:(0,l["default"])(e).data("type"),area:(0,l["default"])(e).data("area"),name:(0,l["default"])(e).data("name")}}).filter(function(e){return e.type===t}),n=v.filter(function(e){var t=!0,n=!1,a=void 0;try{for(var o,i=r[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;if(e[u.area].toLowerCase()===u.name)return!0}}catch(l){n=!0,a=l}finally{try{!t&&i["return"]&&i["return"]()}finally{if(n)throw a}}return!1}).filter(function(e){return e.lat&&e.lon});return d["default"].clearMarkers().addMarkers(n),"break"}();if("break"===a)break;case"heatmaps":d["default"].clearHeatmap(r,n),(0,l["default"])(e.currentTarget).parent().remove();break;case"geometry":d["default"].clearGeometry(r,n),(0,l["default"])(e.currentTarget).parent().remove()}}),(0,l["default"])(".control .markers").on("click",".advanced",function(e){e.preventDefault()}).on("click",".add",function(e){e.preventDefault();var t="markers",r=(0,l["default"])(".control .markers").find('input[type="radio"]:checked').val().trim().toLowerCase(),n=(0,l["default"])(".control .markers").find(".name").val().trim().toLowerCase();if(r&&n){var u=(0,l["default"])(".controls .layers").find("li").toArray().map(function(e){return{type:(0,l["default"])(e).data("type"),area:(0,l["default"])(e).data("area"),name:(0,l["default"])(e).data("name")}}).filter(function(e){return e.type===t});if(!u.find(function(e){return e.area===r&&e.name===n})){(0,l["default"])(".loading").toggle();var f=m.find(function(e){return e.area===r&&e.name===n})?Promise.resolve():p.then(function(e){return(0,c.getVenues)({token:e,area:r,name:n})}).then(function(e){var t=v.map(function(e){return e.cd_pdv}),o=e.filter(function(e){return-1===t.indexOf(e.cd_pdv)});v.push.apply(v,a(o)),m.push({area:r,name:n})});f.then(function(){u.push({type:t,area:r,name:n});var e=v.filter(function(e){var t=!0,r=!1,n=void 0;try{for(var a,o=u[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;if(e[i.area].toLowerCase()===i.name)return!0}}catch(l){r=!0,n=l}finally{try{!t&&o["return"]&&o["return"]()}finally{if(r)throw n}}return!1}).filter(function(e){return e.lat&&e.lon});d["default"].clearMarkers().addMarkers(e).fitBoundsMarkers(),(0,l["default"])(".controls .layers").find("ul").append(o(t,r,n)),i(),(0,l["default"])(".loading").toggle()})["catch"](function(){return(0,l["default"])(".loading").toggle()})}}}).on("click",".cancel",function(e){e.preventDefault(),i()}),(0,l["default"])(".control .heatmaps").on("click",".advanced",function(e){e.preventDefault()}).on("click",".add",function(e){if(e.preventDefault(),0!==(0,l["default"])(".control .heatmaps").find(".variable").prop("selectedIndex")){var t="heatmaps",r=(0,l["default"])(".control .heatmaps").find('input[type="radio"]:checked').val().trim().toLowerCase(),n=(0,l["default"])(".control .heatmaps").find(".name").val().trim().toLowerCase(),u=(0,l["default"])(".control .heatmaps").find(".variable").val().trim().toLowerCase();if(r&&n&&u){var f=(0,l["default"])(".controls .layers").find("li").toArray().map(function(e){return{type:(0,l["default"])(e).data("type"),area:(0,l["default"])(e).data("area"),name:(0,l["default"])(e).data("name")}}).filter(function(e){return e.type===t});if(!f.find(function(e){return e.area===r&&e.name===n})){(0,l["default"])(".loading").toggle();var s=m.find(function(e){return e.area===r&&e.name===n})?Promise.resolve():p.then(function(e){return(0,c.getVenues)({token:e,area:r,name:n})}).then(function(e){var t=v.map(function(e){return e.cd_pdv}),o=e.filter(function(e){return-1===t.indexOf(e.cd_pdv)});v.push.apply(v,a(o)),m.push({area:r,name:n})});s.then(function(){var e=v.filter(function(e){return e.lat&&e.lon&&e[u]}).filter(function(e){return e[r].toLowerCase()===n});d["default"].addHeatmap(e,r,n,u),(0,l["default"])(".controls .layers").find("ul").append(o(t,r,n)),i(),(0,l["default"])(".loading").toggle()})["catch"](function(){return(0,l["default"])(".loading").toggle()})}}}}).on("click",".cancel",function(e){e.preventDefault(),i()}),(0,l["default"])(".control .geometry").on("click",".advanced",function(e){e.preventDefault()}).on("click",".add",function(e){if(e.preventDefault(),0!==(0,l["default"])(".control .geometry").find(".variable").prop("selectedIndex")){var t="geometry",r=(0,l["default"])(".control .geometry").find('input[type="radio"]:checked').val().trim().toLowerCase(),n=(0,l["default"])(".control .geometry").find(".name").val().trim().toLowerCase(),a=(0,l["default"])(".control .geometry").find(".gran").val().trim().toLowerCase(),u=(0,l["default"])(".control .geometry").find(".variable").val().trim().toLowerCase();if(r&&n&&a&&u){var f=(0,l["default"])(".controls .layers").find("li").toArray().map(function(e){return{type:(0,l["default"])(e).data("type"),area:(0,l["default"])(e).data("area"),name:(0,l["default"])(e).data("name")}}).filter(function(e){return e.type===t});if(!f.length){(0,l["default"])(".loading").toggle();var s=-1===h.filter(function(e){return e.area===r}).map(function(e){return e.name}).indexOf(n)?p.then(function(e){return(0,c.getMap)(e,r,n,a)}).then(function(e){return h.push({area:r,name:n,gran:a,shapes:e})}):Promise.resolve();s.then(function(){var e=h.find(function(e){return e.area===r&&e.name===n&&e.gran===a}).shapes;d["default"].addGeometry(e,r,n,u),(0,l["default"])(".controls .layers").find("ul").append(o(t,r,n)),i(),(0,l["default"])(".loading").toggle()})["catch"](function(){return(0,l["default"])(".loading").toggle()})}}}}).on("click",".cancel",function(e){e.preventDefault(),i()})},function(e,t){"use strict";function r(e){return""+e[0].toUpperCase()+e.slice(1)}function n(e){return e>1e3?"#800026":e>500?"#BD0026":e>200?"#E31A1C":e>100?"#FC4E2A":e>50?"#FD8D3C":e>20?"#FEB24C":e>10?"#FED976":"#FFEDA0"}function a(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,new Error(t)}e.exports={capitalize:r,getColor:n,checkFetchStatus:a}},,function(e,t,r){"use strict";function n(){return fetch("./api/v1/token",{credentials:"same-origin"}).then(i.checkFetchStatus).then(function(e){return e.text()})}function a(e){var t=Object.keys(e),r=t.map(function(t){return t+"="+e[t]});return fetch("./api/v1/venues?"+r.join("&")).then(i.checkFetchStatus).then(function(e){return e.json()})}function o(e,t,r,n){return fetch("./api/v1/map?area="+t+"&name="+r+"&gran="+n+"&token="+e).then(i.checkFetchStatus).then(function(e){return e.json()})}var i=r(1);e.exports={getToken:n,getVenues:a,getMap:o}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){function t(e){var t=e.ds_pdv,r=Object.keys(e).filter(function(e){return"ds_pdv"!==e}).map(function(t){return t==="<br><p>"+(e[t]||"-")+"</p>"});return"<div>"+t+r+"</div>"}return l["default"].marker([e.lat,e.lon]).bindPopup(t(e))}function i(e,t){return[e.lat,e.lon,e[t]]}var u=r(12),l=n(u),c=r(10),f=n(c),s=r(1);l["default"].TopoJSON=l["default"].GeoJSON.extend({addData:function(e){if("Topology"===e.type)for(var t in e.objects){var r=f["default"].feature(e,e.objects[t]);l["default"].GeoJSON.prototype.addData.call(this,r)}else l["default"].GeoJSON.prototype.addData.call(this,e);return this}}),l["default"].topoJson=function(e,t){return new l["default"].TopoJSON(e,t)};var d="https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",p={attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',id:"mapbox.light",accessToken:"pk.eyJ1IjoibXluZGZsYW1lIiwiYSI6ImNpbXJ1am85cDAwNGx2OW0xbnU0amdkZHgifQ.56NzZw6OPm41VEqhaqGHAA"},v=null,m=null,h=null,g=null,y=null,k=null,C=null;e.exports={init:function(e){v=l["default"].map(e,{zoomControl:!1}).setView([40.417049,-3.703525],6),l["default"].control.zoom({position:"bottomleft"}).addTo(v),m=l["default"].control(),m.onAdd=function(e){return this._div=l["default"].DomUtil.create("div","info"),this.update(),this._div},m.update=function(e){var t="";if(e)for(var r in e)e.hasOwnProperty(r)&&(t+=r+": "+e[r]+"<br>");else t="Hover over an area";this._div.innerHTML="<h4>Area Data</h4>"+t},h=l["default"].control({position:"bottomright"}),h.onAdd=function(e){for(var t=l["default"].DomUtil.create("div","info legend"),r=[0,10,20,50,100,200,500,1e3],n=0;n<r.length;n++)t.innerHTML+='\n          <i style="background:'+(0,s.getColor)(r[n]+1)+'"></i>\n          <span>'+r[n]+(r[n+1]?"&ndash;"+r[n+1]+"<br>":"+")+"</span>";return t},g=l["default"].tileLayer(d,p).addTo(v),y=l["default"].markerClusterGroup({disableClusteringAtZoom:18}).addTo(v),k=[],C=[]},clearMarkers:function(){return y.clearLayers(),this},addMarkers:function(e){return e.length&&y.addLayers(e.map(o)),this},fitBoundsMarkers:function(){return v.fitBounds(y.getBounds()),this},clearHeatmaps:function(){for(;k.length;){var e=k.shift();v.removeLayer(e.heatmap)}return this},clearHeatmap:function(e,t){var r=k.reduce(function(r,n,a){return n.area===e&&n.name===t?a:r},-1);return-1!==r&&(v.removeLayer(k[r].heatmap),k=[].concat(a(k.slice(0,r)),a(k.slice(r+1)))),this},addHeatmap:function(e,t,r,n){var o=e.map(function(e){return i(e,n)}),u=Math.max.apply(Math,a(o.map(function(e){return e[2]}).sort(function(e,t){return t-e}).slice(.1*o.length))),c=l["default"].heatLayer(o,{radius:25,max:u});return c.addTo(v),k.push({area:t,name:r,heatmap:c}),this},fitBoundsHeatmaps:function(){return this},clearGeometries:function(){for(;C.length;){var e=C.shift();v.removeLayer(e.geometry)}return this},clearGeometry:function(e,t){var r=C.reduce(function(r,n,a){return n.area===e&&n.name===t?a:r},-1);return-1!==r&&(v.removeLayer(C[r].geometry),C=[].concat(a(C.slice(0,r)),a(C.slice(r+1)))),v.removeControl(m),v.removeControl(h),v.setView([40.417049,-3.703525],6),this},addGeometry:function(e,t,r,n){var a=l["default"].topoJson(null,{onEachFeature:function(e,t){t.on({mouseover:function(e){e.target.setStyle({weight:2,color:"#666",dashArray:"",fillOpacity:.7}),l["default"].Browser.ie||l["default"].Browser.opera||e.target.bringToFront(),m.update(e.target.feature.properties)},mouseout:function(e){a.resetStyle(e.target),m.update()},click:function(e){v.fitBounds(e.target.getBounds())}})},style:function(e){return{fillColor:(0,s.getColor)(e.properties[n]),fillOpacity:.7,weight:1,opacity:1,color:"white",dashArray:"3"}}}).addData(e).addTo(v);return C.push({area:t,name:r,geometry:a}),m.addTo(v),h.addTo(v),this},fitBoundsGeometries:function(){return v.fitBounds(C.getBounds()),this}}},,,,,,function(e,t,r){!function(e,r){r(t)}(this,function(e){"use strict";function t(){}function r(e){if(!e)return t;var r,n,a=e.scale[0],o=e.scale[1],i=e.translate[0],u=e.translate[1];return function(e,t){t||(r=n=0),e[0]=(r+=e[0])*a+i,e[1]=(n+=e[1])*o+u}}function n(e){if(!e)return t;var r,n,a=e.scale[0],o=e.scale[1],i=e.translate[0],u=e.translate[1];return function(e,t){t||(r=n=0);var l=Math.round((e[0]-i)/a),c=Math.round((e[1]-u)/o);e[0]=l-r,e[1]=c-n,r=l,n=c}}function a(e,t){for(var r,n=e.length,a=n-t;a<--n;)r=e[a],e[a++]=e[n],e[n]=r}function o(e,t){for(var r=0,n=e.length;n>r;){var a=r+n>>>1;e[a]<t?r=a+1:n=a}return r}function i(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return u(e,t)})}:u(e,t)}function u(e,t){var r={type:"Feature",id:t.id,properties:t.properties||{},geometry:l(e,t)};return null==t.id&&delete r.id,r}function l(e,t){function n(e,t){t.length&&t.pop();for(var r,n=s[0>e?~e:e],o=0,i=n.length;i>o;++o)t.push(r=n[o].slice()),f(r,o);0>e&&a(t,i)}function o(e){return e=e.slice(),f(e,0),e}function i(e){for(var t=[],r=0,a=e.length;a>r;++r)n(e[r],t);return t.length<2&&t.push(t[0].slice()),t}function u(e){for(var t=i(e);t.length<4;)t.push(t[0].slice());return t}function l(e){return e.map(u)}function c(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(c)}:t in d?{type:t,coordinates:d[t](e)}:null}var f=r(e.transform),s=e.arcs,d={Point:function(e){return o(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(o)},LineString:function(e){return i(e.arcs)},MultiLineString:function(e){return e.arcs.map(i)},Polygon:function(e){return l(e.arcs)},MultiPolygon:function(e){return e.arcs.map(l)}};return c(t)}function c(e,t){function r(t){var r,n=e.arcs[0>t?~t:t],a=n[0];return e.transform?(r=[0,0],n.forEach(function(e){r[0]+=e[0],r[1]+=e[1]})):r=n[n.length-1],0>t?[r,a]:[a,r]}function n(e,t){for(var r in e){var n=e[r];delete t[n.start],delete n.start,delete n.end,n.forEach(function(e){a[0>e?~e:e]=1}),u.push(n)}}var a={},o={},i={},u=[],l=-1;return t.forEach(function(r,n){var a,o=e.arcs[0>r?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(a=t[++l],t[l]=r,t[n]=a)}),t.forEach(function(e){var t,n,a=r(e),u=a[0],l=a[1];if(t=i[u])if(delete i[t.end],t.push(e),t.end=l,n=o[l]){delete o[n.start];var c=n===t?t:t.concat(n);o[c.start=t.start]=i[c.end=n.end]=c}else o[t.start]=i[t.end]=t;else if(t=o[l])if(delete o[t.start],t.unshift(e),t.start=u,n=i[u]){delete i[n.end];var f=n===t?t:n.concat(t);o[f.start=n.start]=i[f.end=t.end]=f}else o[t.start]=i[t.end]=t;else t=[e],o[t.start=u]=i[t.end=l]=t}),n(i,o),n(o,i),t.forEach(function(e){a[0>e?~e:e]||u.push([e])}),u}function f(e){return l(e,s.apply(this,arguments))}function s(e,t,r){function n(e){var t=0>e?~e:e;(f[t]||(f[t]=[])).push({i:e,g:l})}function a(e){e.forEach(n)}function o(e){e.forEach(a)}function i(e){"GeometryCollection"===e.type?e.geometries.forEach(i):e.type in s&&(l=e,s[e.type](e.arcs))}var u=[];if(arguments.length>1){var l,f=[],s={LineString:a,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};i(t),f.forEach(arguments.length<3?function(e){u.push(e[0].i)}:function(e){r(e[0].g,e[e.length-1].g)&&u.push(e[0].i)})}else for(var d=0,p=e.arcs.length;p>d;++d)u.push(d);return{type:"MultiLineString",arcs:c(e,u)}}function d(e){var t=e[0],r=e[1],n=e[2];return Math.abs((t[0]-n[0])*(r[1]-t[1])-(t[0]-r[0])*(n[1]-t[1]))}function p(e){for(var t,r=-1,n=e.length,a=e[n-1],o=0;++r<n;)t=a,a=e[r],o+=t[0]*a[1]-t[1]*a[0];return o/2}function v(e){return l(e,m.apply(this,arguments))}function m(e,t){function r(e){e.forEach(function(t){t.forEach(function(t){(a[t=0>t?~t:t]||(a[t]=[])).push(e)})}),o.push(e)}function n(t){return Math.abs(p(l(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}var a={},o=[],i=[];return t.forEach(function(e){"Polygon"===e.type?r(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(r)}),o.forEach(function(e){if(!e._){var t=[],r=[e];for(e._=1,i.push(t);e=r.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){a[0>e?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),o.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(t){var r,o=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){a[0>e?~e:e].length<2&&o.push(e)})})}),o=c(e,o),(r=o.length)>1)for(var i,u,l=1,f=n(o[0]);r>l;++l)(i=n(o[l]))>f&&(u=o[0],o[0]=o[l],o[l]=u,f=i);return o})}}function h(e){function t(e,t){e.forEach(function(e){0>e&&(e=~e);var r=a[e];r?r.push(t):a[e]=[t]})}function r(e,r){e.forEach(function(e){t(e,r)})}function n(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){n(e,t)}):e.type in u&&u[e.type](e.arcs,t)}var a={},i=e.map(function(){return[]}),u={LineString:t,MultiLineString:r,Polygon:r,MultiPolygon:function(e,t){e.forEach(function(e){r(e,t)})}};e.forEach(n);for(var l in a)for(var c=a[l],f=c.length,s=0;f>s;++s)for(var d=s+1;f>d;++d){var p,v=c[s],m=c[d];(p=i[v])[l=o(p,m)]!==m&&p.splice(l,0,m),(p=i[m])[l=o(p,v)]!==v&&p.splice(l,0,v)}return i}function g(e,t){return e[1][2]-t[1][2]}function y(){function e(e,t){for(;t>0;){var r=(t+1>>1)-1,a=n[r];if(g(e,a)>=0)break;n[a._=t]=a,n[e._=t=r]=e}}function t(e,t){for(;;){var r=t+1<<1,o=r-1,i=t,u=n[i];if(a>o&&g(n[o],u)<0&&(u=n[i=o]),a>r&&g(n[r],u)<0&&(u=n[i=r]),i===t)break;n[u._=t]=u,n[e._=t=i]=e}}var r={},n=[],a=0;return r.push=function(t){return e(n[t._=a]=t,a++),a},r.pop=function(){if(!(0>=a)){var e,r=n[0];return--a>0&&(e=n[a],t(n[e._=0]=e,0)),r}},r.remove=function(r){var o,i=r._;return n[i]===r?(i!==--a&&(o=n[a],(g(o,r)<0?e:t)(n[o._=i]=o,i)),i):void 0},r}function k(e,t){function a(e){u.remove(e),e[1][2]=t(e),u.push(e)}var o=r(e.transform),i=n(e.transform),u=y();return t||(t=d),e.arcs.forEach(function(e){var r,n,l,c,f=[],s=0;for(n=0,l=e.length;l>n;++n)c=e[n],o(e[n]=[c[0],c[1],1/0],n);for(n=1,l=e.length-1;l>n;++n)r=e.slice(n-1,n+2),r[1][2]=t(r),f.push(r),u.push(r);for(n=0,l=f.length;l>n;++n)r=f[n],r.previous=f[n-1],r.next=f[n+1];for(;r=u.pop();){var d=r.previous,p=r.next;r[1][2]<s?r[1][2]=s:s=r[1][2],d&&(d.next=p,d[2]=r[2],a(d)),p&&(p.previous=d,p[0]=r[0],a(p))}e.forEach(i)}),e}var C="1.6.26";e.version=C,e.mesh=f,e.meshArcs=s,e.merge=v,e.mergeArcs=m,e.feature=i,e.neighbors=h,e.presimplify=k})},,function(e,t){e.exports=L}]);