"use strict";!function(e,t){function n(e){e.forEach(function(e){return"disabled"===e.state?e.element.addClass("disabled"):e.element.removeClass("disabled")})}function s(e,t){e.attr("aria-valuenow",t),e.attr("aria-valuetext",t+" percent"),e.find(".progress-meter").width(t+"%"),e.find(".progress-meter-text").text(t+"%")}fetch("./api/v1/token",{credentials:"same-origin"}).then(function(e){return e.text()}).then(function(o){var a=t({query:"token="+o});a.on("connect",function(){var t=e(".foursquare .update"),o=e(".foursquare .stop"),r=e(".foursquare .progress"),i=e(".foursquare .download");t.on("click",function(e){e.preventDefault(),a.emit("foursquare_start")}),o.on("click",function(e){e.preventDefault(),a.emit("foursquare_stop")}),a.on("foursquare_start",function(){n([{element:t,state:"disabled"},{element:o,state:""},{element:i,state:"disabled"}])}),a.on("foursquare_stop",function(){n([{element:t,state:""},{element:o,state:"disabled"},{element:i,state:""}])}),a.on("foursquare_progress",function(e){s(r,e)});var l=e(".yelp .update"),u=e(".yelp .stop"),c=e(".yelp .progress"),f=e(".yelp .download");l.on("click",function(e){e.preventDefault(),a.emit("yelp_start")}),u.on("click",function(e){e.preventDefault(),a.emit("yelp_stop")}),a.on("yelp_start",function(){n([{element:l,state:"disabled"},{element:u,state:""},{element:f,state:"disabled"}])}),a.on("yelp_stop",function(){n([{element:l,state:""},{element:u,state:"disabled"},{element:f,state:""}])}),a.on("yelp_progress",function(e){s(c,e)});var d=e(".twitter .update"),p=e(".twitter .stop"),m=e(".twitter .progress"),_=e(".twitter .download");d.on("click",function(e){e.preventDefault(),a.emit("twitter_start")}),p.on("click",function(e){e.preventDefault(),a.emit("twitter_stop")}),a.on("twitter_start",function(){n([{element:d,state:"disabled"},{element:p,state:""},{element:_,state:"disabled"}])}),a.on("twitter_stop",function(){n([{element:d,state:""},{element:p,state:"disabled"},{element:_,state:""}])}),a.on("twitter_progress",function(e){s(m,e)})})})}($,io);