"use strict";!function(e,t){function n(e){e.forEach(function(e){return"disabled"===e.state?e.element.addClass("disabled"):e.element.removeClass("disabled")})}function o(e,t){e.attr("aria-valuenow",t),e.attr("aria-valuetext",t+" percent"),e.find(".progress-meter").width(t+"%"),e.find(".progress-meter-text").text(t+"%")}fetch("./api/v1/token",{credentials:"same-origin"}).then(function(e){return e.text()}).then(function(a){var s=t({query:"token="+a});s.on("connect",function(){var t=e(".foursquare .update"),a=e(".foursquare .stop"),r=e(".foursquare .progress"),i=e(".foursquare .download");t.on("click",function(e){e.preventDefault(),s.emit("foursquare_start")}),a.on("click",function(e){e.preventDefault(),s.emit("foursquare_stop")}),s.on("foursquare_start",function(){n([{element:t,state:"disabled"},{element:a,state:""},{element:i,state:"disabled"}])}),s.on("foursquare_stop",function(){n([{element:t,state:""},{element:a,state:"disabled"},{element:i,state:""}])}),s.on("foursquare_progress",function(e){o(r,e)});var l=e(".yelp .update"),u=e(".yelp .stop"),c=e(".yelp .progress"),f=e(".yelp .download");l.on("click",function(e){e.preventDefault(),s.emit("yelp_start")}),u.on("click",function(e){e.preventDefault(),s.emit("yelp_stop")}),s.on("yelp_start",function(){n([{element:l,state:"disabled"},{element:u,state:""},{element:f,state:"disabled"}])}),s.on("yelp_stop",function(){n([{element:l,state:""},{element:u,state:"disabled"},{element:f,state:""}])}),s.on("yelp_progress",function(e){o(c,e)});var d=e(".twitter .update"),p=e(".twitter .stop"),m=e(".twitter .progress"),b=e(".twitter .download");d.on("click",function(e){e.preventDefault(),s.emit("twitter_start")}),p.on("click",function(e){e.preventDefault(),s.emit("twitter_stop")}),s.on("twitter_start",function(){n([{element:d,state:"disabled"},{element:p,state:""},{element:b,state:"disabled"}])}),s.on("twitter_stop",function(){n([{element:d,state:""},{element:p,state:"disabled"},{element:b,state:""}])}),s.on("twitter_progress",function(e){o(m,e)});var _=e(".facebook .update"),k=e(".facebook .stop"),v=e(".facebook .progress"),w=e(".facebook .download");_.on("click",function(e){e.preventDefault(),s.emit("facebook_start")}),k.on("click",function(e){e.preventDefault(),s.emit("facebook_stop")}),s.on("facebook_start",function(){n([{element:_,state:"disabled"},{element:k,state:""},{element:w,state:"disabled"}])}),s.on("facebook_stop",function(){n([{element:_,state:""},{element:k,state:"disabled"},{element:w,state:""}])}),s.on("facebook_progress",function(e){o(v,e)})})})}($,io);