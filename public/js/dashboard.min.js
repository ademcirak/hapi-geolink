"use strict";!function(e,t){function n(e){e.forEach(function(e){return"disabled"===e.state?e.element.addClass("disabled"):e.element.removeClass("disabled")})}function a(e,t){e.attr("aria-valuenow",t),e.attr("aria-valuetext",t+" percent"),e.find(".progress-meter").width(t+"%"),e.find(".progress-meter-text").text(t+"%")}fetch("./api/v1/token",{credentials:"same-origin"}).then(function(e){return e.text()}).then(function(o){var s=t({query:"token="+o});s.on("connect",function(){var t=e(".foursquare .update"),o=e(".foursquare .stop"),r=e(".foursquare .progress"),l=e(".foursquare .download");t.on("click",function(e){e.preventDefault(),s.emit("foursquare_start")}),o.on("click",function(e){e.preventDefault(),s.emit("foursquare_stop")}),s.on("foursquare_start",function(){n([{element:t,state:"disabled"},{element:o,state:""},{element:l,state:"disabled"}])}),s.on("foursquare_stop",function(){n([{element:t,state:""},{element:o,state:"disabled"},{element:l,state:""}])}),s.on("foursquare_progress",function(e){a(r,e)});var u=e(".yelp .update"),i=e(".yelp .stop"),f=e(".yelp .progress"),c=e(".yelp .download");u.on("click",function(e){e.preventDefault(),s.emit("yelp_start")}),i.on("click",function(e){e.preventDefault(),s.emit("yelp_stop")}),s.on("yelp_start",function(){n([{element:u,state:"disabled"},{element:i,state:""},{element:c,state:"disabled"}])}),s.on("yelp_stop",function(){n([{element:u,state:""},{element:i,state:"disabled"},{element:c,state:""}])}),s.on("yelp_progress",function(e){a(f,e)})})})}($,io);